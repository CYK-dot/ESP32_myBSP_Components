# 基本介绍
- IDF的开发逻辑是，配网和用网API分离。配网API较为复杂，而用网API较为简单。
- 正因如此，本组件旨在二次封装配网API，完成配置后，可以直接使用LwIP之上的API或是ESP-NOW的API。
- 本组件不存在任何场景约束性。任何需求都能在下述流程中找到对应。
- 如果找不到对应，也可以做到只加代码不改代码。

# ESP32-WIFI的执行顺序流
1. (必须)配置wifi外设的工作模式。
2. (必须)启动wifi外设。
3. (非必须)配置物理层协议。即802.11N、带宽等参数。
4. (非必须)配置应用层协议。如ESP-NOW。
5. (必须)让wifi外设开始联网。
6. (非必须)联网后二次配置应用层协议。
7. 开始使用应用层协议。

# (step1+2:) 可以借助http实现前两步
- 定义一个RcsHttpWifiConf_t常量，并赋值为RcsHttpWifiConfigConstDefault
- 定义一个httpd_handle_t全局静态变量
- 调用RcsWifiHttpSetup即可

# (step1:) 当http无法满足需求时，可以手动创建wifi
- 调用RcsWifiSetConfigDefault获取配置，如果AP+STA，需要分成两次调用，而且不能输入同一个变量
- 根据需求，决定是否需要额外调用RcsWifiSetConfigChannel，只有AP模式下需要。
- 调用RcsWifiSetup启动wifi外设
- tips:所谓获取配置，实际上就是把容易出错的配置都赋值一下，因此不使用该函数获取配置也是完全可行的。

# (step2:) 当http无法满足需求时，可以手动保存wifi配置，或者不保存也行
- 定义一个RcsNvsWifiConf_t常量，定义默认wifi配置，并在调用RcsWifiNvsInit时传入
- 通过RcsWifiNvsRead读取配置。如果从未写入过配置，则会在初次调用本函数时写入默认配置
- 通过RcsWifiNvsWrite写入配置。
- tips:获取到的配置不能直接传给RcsWifiSetup。还需要通过RcsWifiSetConfigDefault刷两遍，确保参数无误。

# (step3:) 配置wifi的协议和带宽
- 根据需求，决定是否需要更改wifi的工作模式。例如配置为wifi6，或者配置为LR远距离模式，默认为wifi4模式。

# step4: 配置链路层及以上的协议栈
- 部分上层协议，如ESP-NOW，需要在wifi外设启动后、wifi连接建立前配置。

# step5: 启动连接
- 前面的步骤只完成了协议栈的全栈配置，wifi并不会主动连接，需要调用MyWifiWaitConnection完成